var link = document.querySelector(".write-us"),
    popup = document.querySelector(".modal-write-us");
if (popup) { var close = popup.querySelector(".modal-close"),
        username = popup.querySelector("[name=username]"),
        form = popup.querySelector("form"),
        email = popup.querySelector("[name=email]"),
        message = popup.querySelector("[name=message]"),
        isStorageSupport = !0,
        storage = ""; try { storage = localStorage.getItem("username") } catch (e) { isStorageSupport = !1 }
    link.addEventListener("click", function(e) { e.preventDefault(), popup.classList.add("modal-show"), storage ? (username.value = storage, email.focus()) : username.focus() }), close.addEventListener("click", function(e) { e.preventDefault(), popup.classList.remove("modal-show"), popup.classList.remove("modal-error") }), form.addEventListener("submit", function(e) { username.value && email.value && message.value ? isStorageSupport && localStorage.setItem("username", username.value) : (e.preventDefault(), popup.classList.remove("modal-error"), popup.offsetWidth = popup.offsetWidth, popup.classList.add("modal-error")) }), window.addEventListener("keydown", function(e) { 27 === e.keyCode && (e.preventDefault(), popup.classList.contains("modal-show") && (popup.classList.remove("modal-show"), popup.classList.remove("modal-error"))) }) }
var mapLink = document.querySelector(".button-map"),
    mapPopup = document.querySelector(".modal-map");
if (mapPopup) { var mapClose = mapPopup.querySelector(".modal-close");
    mapLink.addEventListener("click", function(e) { e.preventDefault(), mapPopup.classList.add("modal-show") }), mapClose.addEventListener("click", function(e) { e.preventDefault(), mapPopup.classList.remove("modal-show") }), window.addEventListener("keydown", function(e) { e.preventDefault(), 27 === e.keyCode && mapPopup.classList.contains("modal-show") && mapPopup.classList.remove("modal-show") }) }
var buyButton = document.querySelectorAll(".buy"),
    buyPopup = document.querySelector(".modal-basket");
if (buyPopup) { var buyClose = buyPopup.querySelector(".modal-close"); for (index = 0; index < buyButton.length; index++) button = buyButton[index], button.addEventListener("click", function(e) { buyPopup.classList.add("modal-show"), e.preventDefault() });
    buyClose.addEventListener("click", function(e) { e.preventDefault(), buyPopup.classList.remove("modal-show") }), window.addEventListener("keydown", function(e) { e.preventDefault(), 27 === e.keyCode && buyPopup.classList.contains("modal-show") && buyPopup.classList.remove("modal-show") }) }